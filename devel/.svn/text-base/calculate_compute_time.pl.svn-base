#!/usr/local/bin/perl

use strict;
use Date::Parse;

my $times = $ARGV[0];

my %times;

open (IN, $times) || die "cannot open times file '$times'. $!\n";

while (<IN>) {
	chomp $_;
	
	my @line = split '\t', $_;
	unless ($times{$line[0]}->{$line[1]}) {
		$times{$line[0]}->{$line[1]} = $line[2];
	}
#	print "$line[2]\t" . str2time($line[2]) . "\n";
}

my $total_secs;

foreach my $job (keys %times) {
	my $st = str2time($times{$job}->{STARTTIME});
	my $et = str2time($times{$job}->{ENDTIME});
	
	my $diff = $et - $st;
	
#	print $diff . "\n";
	$total_secs += $diff;	
}

my $sec = $total_secs % 60;
my $min = (($total_secs - $sec) / 60) % 60;
my $hour = ($total_secs - $sec - $min*60)/3600;

#print "$times\tTotal secs\t$total_secs\n"; 
print "$times\tTotal time\t$hour:$min:$sec\n";